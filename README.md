# weaverloft-project

# Main Page
localhost:8080/
사용자 권한이 ROLE_GUEST라면 일반 게시판만 보임
사용자 권한이 ROLE_USER라면 사용자 게시판까지 보임
사용자 권한이 ROLE_ADMIN이라면 관리자 게시판까지 보임

# DB
CREATE TABLE public.board (
	id int8 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE),
	"name" varchar NOT NULL,
	"user" varchar NULL,
	cmt int4 NULL,
	"role" varchar NULL,
	CONSTRAINT id PRIMARY KEY (id)
);

CREATE TABLE public.image (
	id int8 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE),
	"name" varchar(255) NULL,
	pic_byte bytea NULL,
	"type" varchar(255) NULL,
	CONSTRAINT image_pkey PRIMARY KEY (id)
);

CREATE TABLE public.post (
	id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
	"content" varchar(255) NULL,
	title varchar(255) NULL,
	writer varchar(255) NULL,
	board_id int4 NULL,
	"role" varchar NULL,
	CONSTRAINT post_pkey PRIMARY KEY (id),
	CONSTRAINT post_fk FOREIGN KEY (board_id) REFERENCES public.board(id)
);

CREATE TABLE public.tb_user (
	email varchar(255) NOT NULL,
	enabled int4 NOT NULL,
	"name" varchar(255) NULL,
	pw varchar(255) NULL,
	"role" varchar(255) NULL,
	image_id int8 NULL,
	address varchar NULL,
	birth varchar NULL,
	gender varchar NULL,
	phone varchar NULL,
	CONSTRAINT tb_user_pkey PRIMARY KEY (email),
	CONSTRAINT tb_user_fk FOREIGN KEY (image_id) REFERENCES public.image(id)
);

CREATE TABLE public.post_image (
	id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	"name" varchar NULL,
	"type" varchar NULL,
	pic_byte bytea NULL,
	post_id int8 NULL,
	CONSTRAINT post_image_fk FOREIGN KEY (post_id) REFERENCES public.post(id)
);

CREATE TABLE public.file (
	id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	"path" varchar NULL,
	post_id int4 NULL,
	"name" varchar NULL,
	CONSTRAINT file_fk FOREIGN KEY (post_id) REFERENCES public.post(id)
);

CREATE TABLE public."comment" (
	id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	"content" varchar NULL,
	tb_user_id varchar NULL,
	"like" varchar NULL,
	post_id int4 NULL,
	CONSTRAINT comment_fk FOREIGN KEY (post_id) REFERENCES public.post(id),
	CONSTRAINT comment_fk2 FOREIGN KEY (tb_user_id) REFERENCES public.tb_user(email)
);
